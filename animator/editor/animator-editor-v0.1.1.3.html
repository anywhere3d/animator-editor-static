<!DOCTYPE html>
<html>
<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="Mobirise v3.12.1, mobirise.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="assets/images/anywhere3d-logo-girl-128x128-1.png" type="image/x-icon">
    <meta name="description" content="anywhere animator app">
    <title>Animator Editor v0.1.1.3</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic&amp;subset=latin">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i">
    <link rel="stylesheet" href="/assets/bootstrap-material-design-font/css/material.css">
    <link rel="stylesheet" href="/assets/tether/tether.min.css">
    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/dropdown/css/style.css">
    <link rel="stylesheet" href="/assets/animate.css/animate.min.css">
    <link rel="stylesheet" href="/assets/theme/css/style.css">
    <link rel="stylesheet" href="/assets/mobirise/css/mbr-additional.css">
    <link rel="stylesheet" href="/css/side-panels.css">

    <script src="/js/jquery.min.js"></script>
    <script src="/bootstrap/js/fileinput.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/bootstrap/js/bootbox.min.js"></script>

</head>

<body>
<section id="ext_menu-13">

    <nav class="navbar navbar-dropdown navbar-fixed-top">
        <div class="container">

            <div class="mbr-table">
                <div class="mbr-table-cell">

                    <div class="navbar-brand">
                        <a href="/" class="navbar-logo"><img src="/assets/images/anywhere3d-logo-girl-1-128x128.png" alt="anywhere3d logo"></a>
                        <a class="navbar-caption" href="/dashboard" target="_blank">anywhere3d</a>
                    </div>

                </div>
                <div class="mbr-table-cell">

                    <button class="navbar-toggler pull-xs-right hidden-md-up" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar">
                        <div class="hamburger-icon"></div>
                    </button>

                    <ul class="nav-dropdown collapse pull-xs-right nav navbar-nav navbar-toggleable-sm" id="exCollapsingNavbar">
                        <li class="nav-item"><a class="nav-link link" href="#">OVERVIEW</a></li>
                        <li class="nav-item"><a class="nav-link link" href="#">FEATURES</a></li>
                        <li class="nav-item"><a class="nav-link link" href="#">HELP</a></li>
                        <li class="nav-item nav-btn"><a class="nav-link btn btn-white btn-white-outline" href="#">DOWNLOAD</a></li>
                        <li class="nav-item nav-btn"><a class="nav-link btn btn-white btn-white-outline" href="#">SAVE</a></li>
                        <li class="nav-item nav-btn"><a class="nav-link btn btn-primary" href="#">PUBLISH</a></li>
                        <li class="nav-item nav-btn"><a class="nav-link btn btn-white btn-white-outline" href="/default/login">LOGIN</a></li>
                    </ul>
                    <button hidden="" class="navbar-toggler navbar-close" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar">
                        <div class="close-icon"></div>
                    </button>

                </div>
            </div>

        </div>
    </nav>

</section>

<section class="engine"><a rel="external" href="https://anywhere3d.com/animator/editor/v/0.1.1.3">animator-editor-v.0.1.1.3</a></section>

<section class="mbr-section mbr-after-navbar" id="msg-box7-z" style="background-color:rgba(0,0,0,1); padding-top:380px; padding-bottom:380px; overflow:hidden;">

    <div id="render-container" class="mbr-overlay" style="opacity:1; background-color:rgb(0,0,0);"></div>
<!-- 
    <link rel="stylesheet" type="text/css" href="/css/buttons.css">
	<link rel="stylesheet" type="text/css" href="/css/spinner.css">
	<link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/menu-menubar.css">
 -->

	<style type="text/css" id="side-panels-css">
        #left-side  *, 
        #right-side * { box-sizing:border-box; -moz-box-sizing:border-box; font-family:'Arial', sans-serif; font-weight:normal;}
        #left-side { left:0px; top:0px; bottom:0px; -webkit-transform:translateX( -380px ); }
    	#right-side { right:0px; top:0px; bottom:0px; -webkit-transform: translateX( 380px ); }
        #left-side, 
        #right-side { 
            position:absolute; color:#eee; font-size:13px;
            background-color:rgba(0,0,0,0.4); width:452px; line-height:1.4em;
            -webkit-transition: -webkit-transform 500ms ease-out;
        }
    	#left-side:hover, 
        #left-side.pinned,
        #right-side:hover, 
        #right-side.pinned { -webkit-transform: translateX(0); }
    	#left-side-content { 
            position:absolute; right:52px; top:30px; left:0px; bottom:0px; 
            padding:20px 20px 20px 20px; overflow:hidden; 
        }
        #right-side-content {
            position:absolute; left:52px; top:30px; right:10px; bottom:0px; 
            padding: 20px 20px 20px 20px; overflow:auto; 
        }
    	.reset-container a:link    {color:#ccf; text-decoration:initial;}
        .reset-container a:visited {color:#ccf; text-decoration:initial;}
        .reset-container a:hover   {color:#0f0; text-decoration:initial;}
        .reset-container a:active  {color:#f00; text-decoration:initial;}
    	/* a { color:white; text-shadow:0 1px 0 rgba(0,0,0,0.5) } */
    	#left-side h1, 
        #right-side h1 { margin-bottom:10px; font-size:14px;}
    	#left-side h2, 
        #right-side h2 { font-size:11px; margin-bottom:5px;}
    	#left-side p, 
        #right-side p  { font-size:13px; }
        .btn-light, 
        .btn-escape, 
        .btn-helper    { width:32px; height:32px; opacity:1; background:rgba(255,255,255,0); }
        .block         { margin-bottom:10px; float:left; width:280px; }
        .button:hover, 
        .button:active { background-position:0px -2px; }
    </style>

    <style type="text/css" id="v3-dynamic-sliders-css">
        /*#droplist-bones { position:absolute; left:150px; width:200px; font-size:15px; }*/
        #bone-label { position:absolute; left:0px; right:0px; top:0px; font-size:1.5em; text-align:center; }
        .control-container { 
            left:0px; right:0px; margin-bottom:10px; padding:10px; 
            color: #ffffff; border:2px solid #ffffff; border-radius:10px; 
        }
        .slider-row { padding-left:10px; padding-right:5px; margin-bottom:4px;}
        .dynamic-label  { position:absolute; width:18%; font-size:11px; padding-top:2px; }
        .dynamic-slider { width:60%; margin-left:20%; }
        .dynamic-output { 
            position:absolute; margin-right:20px; width:18%; 
            color:#ffffff; border:none; background-color:rgba(255,255,255,0); 
            font-weight:bold; font-size:1.5em; text-align:right; 
        } 
        .reset-container {padding:1px; margin-bottom:10px; font-weight:bold; text-align:right;}
    </style>

    <style>
        .form-control { min-height:1em; }
        .form-group { margin-bottom:0px; }
        .btn-success, .btn-success:hover { background-color:#006900; border-color:#006900; }
        #import-skinned { color:#dddddd; font-family:'Arial', sans-serif; font-size:1.2em; min-height:1em; letter-spacing:0px; margin-bottom:10px; }
        #pose-export >  div > div > a, #anim-export >  div > div > a, #random-pose >  div > div > a,
        #skinned-avatar > div > div > a { color:#dddddd; font-family:'Arial', sans-serif; font-size:1.2em; margin-bottom:10px; }
        #pose-export > div > div > a:hover, #anim-export > div > div > a:hover, #random-pose > div > div > a:hover,
        #skinned-avatar > div > div > a:hover { color:blue; font-weight:bold; }
        #reset-position:hover, #reset-rotation:hover, #reset-scale:hover, #avatar-helper:hover, #bones-helper:hover, #reset-pose:hover { color:aqua; font-weight:bold; }
        #reset-position:active, #reset-rotation:active, #reset-scale:active, #avatar-helper:active, #bones-helper:active, #reset-pose:active { color:lawngreen; font-weight:bold; }
    </style>
    
    <div id="left-side" style="top:80px; bottom:0px;">
        <div id="left-side-pinbtn"></div>
        <div id="left-side-content">
            
            <!-- LEFT SIDE PANEL CONTENTS -->
            <div class="control-container" style="border:none; font-size:1.8em;">
                Animation Settings
            </div>
            
            <!-- <div class="reset-container"></div> -->

            <div id="animation-options" class="control-container" style="border:none;">
                <div class="slider-row">
                    <label for="duration-slider" class="dynamic-label">Duration&nbsp;<strong>:</strong></label>
                    <input type="range" id="duration-slider" class="dynamic-slider" min="-1" max="1" value="0" step="0.1">
                    <input type="number" id="duration-output" min="1" max="5" value="3" class="dynamic-output" step="0.1">
                </div>
                <div class="slider-row">
                    <label for="scl-time-slider" class="dynamic-label">Play Speed</label>
                    <input type="range" id="scl-time-slider"class="dynamic-slider"  min="0" max="2" value="1" step="0.1">
                    <input type="number" id="scl-time-output" value="1" class="dynamic-output" step="0.1">
                </div>
                <div class="slider-row">
                    <label for="animation-loop">Loop&nbsp;</label>
                    <input type="checkbox" id="animation-loop" name="loop" checked="true">
                </div>
                <div class="slider-row" style="font-size:15px;">
                    <!-- <label for="animation-name" class="dynamic-label">Name:<strong></strong></label> -->
                    <input type="text" id="animation-name" class="form-control" maxLength="128" placeholder="animation name">
                </div>
                <!-- <div class="slider-row">&nbsp;</div> -->
            <!-- </div> -->
            
                <div class="reset-container"></div>

            <!-- <div id="animation-options" class="control-container" style="border:none;"> -->
                <div id="skinned-avatar" class="form-group">
                    <label>Change skinned model:</label>
                    <div class="nav-dropdown collapse pull-xs-left nav navbar-nav" style="font-family:'Arial',sans-serif; font-size:1em;">
                        <div class="nav-item nav-btn"><a href="#" id="load-male" class="nav-link btn btn-white btn-white-outline">Male</a></div>
                        <div class="nav-item nav-btn"><a href="#" id="load-female" class="nav-link btn btn-white btn-white-outline">Female</a></div>
                        <div class="nav-item nav-btn"><a href="#" id="load-skeleton" class="nav-link btn btn-white btn-white-outline"">Skeleton</a></div>
                    </div>
                </div>
    
                <div id="skinned-import" class="form-group">
                    <label>Import skinned model:</label>
                    <input type="file" id="load-skinned" style="display:none;" onchange="loadJsonSkinnedAnimatedMesh(event);">
                    <div class="nav-item nav-btn">
                        <a href="#" id="import-skinned" class="form-control btn btn-primary" onclick="$('#load-skinned')[0].click();">Import&nbsp;Skinned</a>
                    </div>
                </div>
            <!-- </div> -->
            
                <div class="reset-container"></div>
            
            <!-- <div id="save-options" class="control-container" style="border:none;"> -->
                <div id="pose-export" class="form-group">
                    <label>Save/Export Pose:</label>
                    <div class="nav-dropdown collapse pull-xs-left nav navbar-nav" style="font-family:'Arial',sans-serif; font-size:1em;">
                        <div class="nav-item nav-btn"><a href="#" id="download-pose" class="nav-link btn btn-white btn-white-outline">Download</a></div>
                        <div class="nav-item nav-btn"><a href="#" id="save-pose" class="nav-link btn btn-white btn-white-outline">Save Pose</a></div>
                    </div>
                </div>
                
                <div id="anim-export" class="form-group">
                    <label>Save/Export Animation:</label>
                    <div class="nav-dropdown collapse pull-xs-left nav navbar-nav" style="font-family:'Arial',sans-serif; font-size:1em;">
                        <div class="nav-item nav-btn"><a href="#" id="download-animation" class="nav-link btn btn-success">Download</a></div>
                        <div class="nav-item nav-btn"><a href="#" id="save-animation" class="nav-link btn btn-success">Save Animation</a></div>
                    </div>
                </div>
                
                <br><br><br><br>
                
                <div id="random-pose" class="form-group">
                    <div class="nav-dropdown collapse pull-xs-left nav navbar-nav" style="font-family:'Arial',sans-serif; font-size:1em; width:100%;">
                        <div class="nav-item nav-btn" style="padding:0px;">
                            <a href="#" id="crazy-pose" class="btn btn-white btn-white-outline" style="width:100%; padding:6.8px;">Crazy&nbsp;Pose</a>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>



    <div id="right-side" style="top:80px; bottom:0px;">
        <div id="right-side-pinbtn"></div>
        <div id="right-side-content">

            <!-- RIGHT SIDE PANEL CONTENTS -->
            <select class="form-control" id="droplist-bones" style="line-height:1em; min-height:1em;" onchange="newCurrentBoneSelected();">
                <option value="" selected>Select Bone</option>
                <option value="Head">Head</option>
                <option value="Neck">Neck</option>
                <option value="Torso">Torso</option>
                <option value="Hip">Hip</option>
                <option value="Arms">Arms</option>
                <option value="Legs">Legs</option>
            </select>
            
            <div class="reset-container">&nbsp;</div>
            
            <div id="position-sliders" class="control-container" style="border:none;">
                <div class="slider-row">
                    <label for="pos-slider-x" id="pos-label-x" class="dynamic-label">position&nbsp;<strong>x:</strong></label>
                    <input type="range" id="pos-slider-x" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                    <input type="number" id="pos-output-x" class="dynamic-output" value="0" step="0.01">
                </div>
                <div class="slider-row">
                    <label for="pos-slider-y" id="pos-label-y" class="dynamic-label">position&nbsp;<strong>y:</strong></label>
                    <input type="range" id="pos-slider-y" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                    <input type="number" id="pos-output-y" class="dynamic-output" value="0" step="0.01">
                </div>
                <div class="slider-row">
                    <label for="pos-slider-z" id="pos-label-z" class="dynamic-label">position&nbsp;<strong>z:</strong></label>
                    <input type="range" id="pos-slider-z" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                    <input type="number" id="pos-output-z" class="dynamic-output" value="0" step="0.01">
                </div>
            </div>
            
            <div class="reset-container">
                <a href="#"><span id="reset-position" onclick="bonesResetPosition(avatar);">Reset all bones position</span></a>
            </div>
            
            <div id="rotation-sliders" class="control-container" style="border:none;">
                <div class="slider-row">
                    <label for="rot-slider-x" id="rot-label-x" class="dynamic-label">rotation&nbsp;<strong>x:</strong></label>
                    <input type="range" id="rot-slider-x" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                    <input type="number" id="rot-output-x" class="dynamic-output" value="0" step="0.01">
                </div>
                <div class="slider-row">
                    <label for="rot-slider-y" id="rot-label-y" class="dynamic-label">rotation&nbsp;<strong>y:</strong></label>
                    <input type="range" id="rot-slider-y" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                    <input type="number" id="rot-output-y" class="dynamic-output" value="0" step="0.01">
                </div>
                <div class="slider-row">
                    <label for="rot-slider-z" id="rot-label-z" class="dynamic-label">rotation&nbsp;<strong>z:</strong></label>
                    <input type="range" id="rot-slider-z" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                    <input type="number" id="rot-output-z" class="dynamic-output" value="0" step="0.01">
                </div>
            </div>
            
            <div class="reset-container">
                <a href="#"><span id="reset-rotation" onclick="bonesResetQuaternion(avatar);">Reset all bones rotation</span></a>
            </div>
            
            <div id="scale-uniform" class="control-container" style="border:none;">
                <div class="slider-row">
                    <label for="scl-uniform-slider" class="dynamic-label">Scale <strong>xyz</strong></label>
                    <input type="range" id="scl-uniform-slider" min="-1" max="1" value="0" class="dynamic-slider" step="0.01">
                    <input type="number" id="scl-uniform-output" value="0" class="dynamic-output" step="0.01">
                </div>
            </div>
            
            <div class="reset-container">
                <a href="#"><span id="reset-scale" onclick="bonesResetScale(avatar);">Reset all bones scale</span></a>
            </div>
            
            <div id="scale-sliders" class="control-container" style="border:none;">
                <div class="slider-row">
                    <label for="scl-slider-x" id="scl-label-x" class="dynamic-label">scale&nbsp;<strong>x:</strong></label>
                    <input type="range" id="scl-slider-x" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                    <input type="number" id="scl-output-x" class="dynamic-output" value="0" step="0.01">
                </div>
                <div class="slider-row">
                    <label for="scl-slider-y" id="scl-label-y" class="dynamic-label">scale&nbsp;<strong>y:</strong></label>
                    <input type="range" id="scl-slider-y" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                    <input type="number" id="scl-output-y" class="dynamic-output" value="0" step="0.01">
                </div>
                <div class="slider-row">
                    <label for="scl-slider-z" id="scl-label-z" class="dynamic-label">scale&nbsp;<strong>z:</strong></label>
                    <input type="range" id="scl-slider-z" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                    <input type="number" id="scl-output-z" class="dynamic-output" value="0" step="0.01">
                </div>
            </div>
            
            <div class="reset-container">
                <a href="#"><span id="avatar-helper" onclick="showhideHelper(avatar);">Show/Hide Avatar</span></a>&nbsp;&nbsp;&nbsp;
                <a href="#"><span id="bones-helper" onclick="showhideHelper(armatureHelper);">Show/Hide Bones</span></a>&nbsp;&nbsp;&nbsp;
                <a href="#"><span id="reset-pose" onclick="avatarRestPose(avatar);">Rest&nbsp;Pose</span></a>
            </div>
            
        </div>
    </div>   

    <!-- <div class="container" id="animator-container"></div> -->
    <!-- <div class="form-group" id="animation-buttons"></div> -->

</section>

<footer class="mbr-small-footer mbr-section mbr-section-nopadding mbr-after-navbar" id="footer1-14" style="background-color:rgb(27, 27, 27); padding-top:0.5rem; padding-bottom:4.5rem;">

    <div class="container" style="height:90px;">
        <div id="time-container" style="border:0px solid #ff0000;">time container</div>
        <div id="keys-container" style="position:absolute; top:7px; left:15px; right:15px; border:1px solid #ffff00;">keys container</div>
        <input type="range" min="0" max="3" value="0" class="timer-slider form-control" id="slider-timer" step="0.01" style="padding:0.5em 0;"> <!-- onmousedown="staticSliderPressed('timer', true);" onmouseup="staticSliderPressed('timer', false);" -->            
        
        <style>
            #timer-container > div > div > a { font-family:'Arial', sans-serif; font-size:0.9em; }
            #timer-container > div > div { color:#dddddd; font-family:'Arial', sans-serif; font-size:1.3em; }
            #output-timer { color:#ffffff; font-family:'Arial', sans-serif; font-size:1.5em;}
            #delete-framekey:hover {color:red;}
            #animation-add:hover  {color:darkgreen;}
            #animation-play:hover {color:blue;}
        </style>
        
        <div class="form-group" id="timer-container">
            <div class="nav-dropdown collapse pull-xs-left nav navbar-nav" style="font-family:'Arial',sans-serif; font-size:1em;">
                <div class="nav-item nav-btn"><a href="#" id="delete-framekey" class="nav-link btn btn-white btn-white-outline">Delete Key</a></div> <!-- onclick="deleteCurrentAnimationDataKey();" -->
                <div class="nav-item nav-btn"><input type="checkbox" id="manual-play" name="manual" checked></div>
                <div class="nav-item nav-btn">manual&nbsp;</div>
                <div class="nav-item nav-btn"><a href="#" id="animation-play" class="nav-link btn btn-white btn-white-outline">Play</a></div> <!-- onclick="playAnimation(avatar);" -->
                <div class="nav-item nav-btn">Time:&nbsp;</div>
                <div class="nav-item nav-btn"><output for="slider-timer" class="timeroutput" id="output-timer">0</output></div>
                <div class="nav-item nav-btn"><a href="#" id="animation-add" class="nav-link btn btn-white btn-white-outline">Add Key</a></div> <!-- onclick="insertNewAnimateDataTimeFrameKey();" -->
                <div class="nav-item nav-btn" id="status-msgr" style="color:darkorange; border:0px solid #ffffff; padding:0px 20px;">Status messager</div>
                <div class="nav-item nav-btn"><p class="text-xs-center" id="copyright" style="font-size:1em;">Copyright &copy; 2016-1017 anywhere3d.com</p></div>
            </div>
        </div>
        
        <!-- <p class="text-xs-center" id="status-msgr" style="border:1px solid #ff0000; font-size:1.3em;">Status messager</p> -->
        <!-- <p class="text-xs-center" id="copyright" style="border:0px solid #ffffff;">Copyright &copy; 2016-1017 anywhere3d.com</p> -->
    </div>
    
</footer>


<div style="display:none;">
    <img id="skybox-posx" class="skybox-img" src="/skyboxes/skybox/posx.jpg">
    <img id="skybox-posy" class="skybox-img" src="/skyboxes/skybox/posy.jpg">
    <img id="skybox-posz" class="skybox-img" src="/skyboxes/skybox/posz.jpg">
    <img id="skybox-negx" class="skybox-img" src="/skyboxes/skybox/negx.jpg">
    <img id="skybox-negy" class="skybox-img" src="/skyboxes/skybox/negy.jpg">
    <img id="skybox-negz" class="skybox-img" src="/skyboxes/skybox/negz.jpg">
</div>

<script src="/assets/web/assets/jquery/jquery.min.js"></script>
<script src="/assets/tether/tether.min.js"></script>
<script src="/assets/bootstrap/js/bootstrap.min.js"></script>
<script src="/assets/smooth-scroll/smooth-scroll.js"></script>
<script src="/assets/dropdown/js/script.min.js"></script>
<script src="/assets/touch-swipe/jquery.touch-swipe.min.js"></script>
<script src="/assets/viewport-checker/jquery.viewportchecker.js"></script>
<script src="/assets/theme/js/script.js"></script>

<script src="/three/r78/js/three.js"></script>
<script src="/three/r78/js/EditorControls.js"></script>
<script src="/three/r78/js/Detector.js"></script>
<script src="/three/r78/js/renderers/Projector.js"></script>
<script src="/three/r78/js/KeyboardState.js"></script>
<script src="/three/r78/js/loaders/collada/Animation.js"></script>
<script src="/three/r78/js/loaders/collada/AnimationHandler.js"></script>
<script src="/three/r78/js/loaders/collada/KeyFrameAnimation.js"></script>

<script src="/js/SceneHelpers.js"></script>
<script src="/js/UserUtilities.js"></script>
<script src="/js/HttpUtilities.js"></script>
<script src="/js/LightControls.js"></script>
<script src="/js/EdgesHelper.js"></script>


<script>

    debugMode = true;

//  jQuery selectors.
    var rendererSelector = "#render-container";
    var divContainerSelector = "div.container";
    var leftSideSelector = "#left-side";
    var leftPinbtnSelector = "#left-side-pinbtn";
    var rightSideSelector = "#right-side";
    var rightPinbtnSelector = "#right-side-pinbtn";
    var fontPath = "/three/r78/js/fonts/helvetiker_regular.typeface.json";

//  Controls switch.
    $(rendererSelector).on("mouseenter", function(e){if (controls) controls.enabled = true;});
    $(rendererSelector).on("mouseleave", function(e){if (controls) controls.enabled = false;});

//  Side Panels Pin buttons.
    leftSidePanel = $(leftSideSelector)[0];
    leftSidePinBtn = $(leftPinbtnSelector)[0];
    if ( !!leftSidePinBtn ){
        leftSidePinBtn.pinned = false;
        $(leftPinbtnSelector).on("click", function(e){
            this.pinned = !this.pinned; 
            this.classList.toggle( "pinned", this.pinned );
            this.parentElement.classList.toggle( "pinned", this.pinned );
        });
    //  Open left side panel.
        leftSidePanel.classList.toggle( "pinned", true );
        leftSidePinBtn.classList.toggle( "pinned", true );
    }
    
    rightSidePanel = $(rightSideSelector)[0];
    rightSidePinBtn = $(rightPinbtnSelector)[0];
    if ( !!rightSidePinBtn ){
        rightSidePinBtn.pinned = false;
        $(rightPinbtnSelector).on("click", function(e){
            this.pinned = !this.pinned; 
            this.classList.toggle( "pinned", this.pinned );
            this.parentElement.classList.toggle( "pinned", this.pinned );
        });
    //  Open right side panel.
        rightSidePanel.classList.toggle( "pinned", true );
        rightSidePinBtn.classList.toggle( "pinned", true );
    }

</script>

<script>

//  Ids.
    var timecontainer = "time-container";
    var slidertimer = "slider-timer";
    var durationslider = "duration-slider"; 
    var durationoutput = "duration-output";
    var outputtimescale = "output-timescale";
    var sliderfps = "slider-fps";
    var animationname = "animation-name";
    var animationloop = "animation-loop";

    var loadmale = "load-male";
    var loadfemale = "load-female";
    var loadskeleton = "load-skeleton";
    var loadskinned = "load-skinned";

    var slidertimescale = "slider-timescale";
    var outputtimer = "output-timer";
    var animationplay = "animation-play";
    var animationadd = "animation-add";
    var manualplay = "manual-play";
    
//  Elements.

//  Position sliders.
    posSliderX = document.getElementById("slider-pos-x");
    posSliderY = document.getElementById("slider-pos-y");
    posSliderZ = document.getElementById("slider-pos-z");
    posOutputX = document.getElementById("output-pos-x");
    posOutputY = document.getElementById("output-pos-y");
    posOutputZ = document.getElementById("output-pos-z");
    
//  Rotation sliders.
    rotSliderX = document.getElementById("slider-rot-x");
    rotSliderY = document.getElementById("slider-rot-y");
    rotSliderZ = document.getElementById("slider-rot-z");
    rotOutputX = document.getElementById("output-rot-x");
    rotOutputY = document.getElementById("output-rot-y");
    rotOutputZ = document.getElementById("output-rot-z");
    
//  Uniform Scale slider.
    sclUniformSlider = document.getElementById("slider-scale-uniform");
    sclUniformOutput = document.getElementById("output-scale-uniform");
    
//  Scale sliders.
    sclSliderX = document.getElementById("slider-scl-x");
    sclSliderY = document.getElementById("slider-scl-y");
    sclSliderZ = document.getElementById("slider-scl-z");
    sclOutputX = document.getElementById("output-scl-x");
    sclOutputY = document.getElementById("output-scl-y");
    sclOutputZ = document.getElementById("output-scl-z");

//  Animation Settings.
    timeContainer = document.getElementById(timecontainer);
    durSlider = document.getElementById(durationslider);
    durOutput = document.getElementById(durationoutput);
    timescaleSlider = document.getElementById(slidertimescale);
    timescaleOutput = document.getElementById(outputtimescale);
    fpsSlider = document.getElementById(sliderfps);
    nameAnimField = document.getElementById(animationname);
    loopCheckbox = document.getElementById(animationloop);

//  Skinned Settings.
    loadMaleButton = document.getElementById(loadmale);
    loadFemaleButton = document.getElementById(loadfemale);
    loadSkeletonButton = document.getElementById(loadskeleton);
    loadSkinnedInput = document.getElementById(loadskinned);

//  Animator Controls.
    animtimerSlider = document.getElementById(slidertimer);
    animtimerOutput = document.getElementById(outputtimer);
    playButton = document.getElementById(animationplay);
    addButton = document.getElementById(animationadd);
    playManual = document.getElementById(manualplay);








//  Selectors.
    var slidertimerSelector =  "#" + slidertimer;
    var durationsliderSelector = "#" + durationslider;
    var durationoutputSelector = "#" + durationoutput;
    var slidertimescaleSelector = "#" + slidertimescale;
    var outputtimescaleSelector = "#" + outputtimescale;


</script>

<script>

//  Event Listeners.
    $(durationoutputSelector).on("change", function(e){
        initTimeLiner();
    });

//  Initialize manual play.
    playManual.checked = false;

</script>

<script>

//  TIMELINE.

//    var timecontainer = "time-container";
//    var timeContainer = document.getElementById(timecontainer);

    function initTimeLiner() {
    
    //  Timeliner.
        var timeContainer = document.getElementById(timecontainer);
        timeContainer.innerHTML = "";
            
    //  Settings.
        var duration, defaultTimeScale;
        if ( durOutput ) { duration = Number(durOutput.value);               // (sec).
        } else { duration = 3 };                                             // (sec).
        defaultTimeScale = Math.floor(timeContainer.offsetWidth / duration); // (pixels).
        
    //  Dimensions.
        var markerTrackHeight = 20;
        var width = animtimerSlider.offsetWidth; // duration * defaultTimeScale;
        var height = 50;
        var timeScale = defaultTimeScale; // number of pixels to 1 second.
    
    //  Utilities.
        function proxy_ctx(ctx) {
    	//  Creates a proxy 2d context wrapper which 
    	//  allows the fluent / chaining API.
        	var wrapper = {};
        
        	function proxy_function(c) {
        		return function() {
    			//  Warning: this doesn't return value of function call
        			ctx[c].apply(ctx, arguments);
        			return wrapper;
        		};
        	}
        
        	function proxy_property(c) {
        		return function(v) {
        			ctx[c] = v;
        			return wrapper;
        		};
        	}
        
        	wrapper.run = function(args) {
        		args(wrapper);
        		return wrapper;
        	};
            
        	for (var c in ctx) {
    		//  if (!ctx.hasOwnProperty(c)) continue;
    		//  debugMode && console.log(c, typeof(ctx[c]), ctx.hasOwnProperty(c));
    		//  string, number, boolean, function, object
        
        		var type = typeof(ctx[c]);
        		switch(type) {
        			case "object":
        				break;
        			case "function":
        				wrapper[c] = proxy_function(c);
        				break;
        			default:
        				wrapper[c] = proxy_property(c);
        				break;
        		}
        	}
        
        	return wrapper;
        }
    
    //  View Panel.
        var frame_start = 0; // this is the current scroll position.
        
    //  This class contains the view for the right main section of timeliner
        var tickMark1;
        var tickMark2;
        var tickMark3;
            
    //  Subdivison LOD
    //  timeScale refers to number of pixels per unit
    //  Eg. 1 inch - 60s, 1 inch - 60fps, 1 inch - 6 mins.    
        function time_scaled() {

        	var subDivision = 60;
        
        	tickMark1 = Math.round( (timeScale / subDivision) * 100 ) / 100;
        	tickMark2 = 2 * tickMark1;
        	tickMark3 = 10 * tickMark1;
        
        }
        
        time_scaled();

    //  Timeline Panel.
        var dpr = window.devicePixelRatio;
        var canvas = document.createElement("canvas");
        canvas.width = width; // * dpr;
        canvas.height = height; // * dpr;
        timeContainer.appendChild(canvas);
        
        var ctx = canvas.getContext("2d");
    	var ctx_wrap = proxy_ctx(ctx);
        
        var currentTime; // measured in seconds.
	//  Technically it could be in frames or have it in string format (0:00:00:1-60).
	
    	var LEFT_GUTTER = 0;
    	var i, x, y, il, j;
        	
    //	function paint() {
    
        //  Background.
            ctx.fillStyle = "#ffffff";
            ctx.clearRect(0, 0, canvas.width, canvas.height);
    		ctx.save();
    		ctx.scale(dpr, dpr);
            
            ctx.lineWidth = 2; // options: | 0.5 | 1 | 2 |
            
            var units = Math.round(timeScale / tickMark1);
    		var offsetUnits = (frame_start * timeScale) % units;
    		var count = Math.ceil( width / units );
  
        //  timeScale = pixels to 1 second (40)
		//  tickMark1 = marks per second (marks / s)
		//  units = pixels to every mark (40)
            var t =  Math.floor(units * 100 / timeScale);
        //  debugMode && console.log("t:", t);
            
        //  1.Labels only.
    		for (i = 0; i < count + 1; i++) {
    			x = i * units + LEFT_GUTTER - offsetUnits;
                
    			ctx.fillStyle = "#535353";
    			ctx.textAlign = "center";
                
    			var ti = ( t * i / 100 ).toFixed(2).replace(/\./g, ":");
    		//	debugMode && console.log("t" + i + ":", ti);
                
    			ctx.fillText(ti, x, 50);
    		}
    
    		units = Math.round( timeScale / tickMark2 );
    		count =  Math.round( (width - LEFT_GUTTER + offsetUnits) / units );

        //  2.Marker lines - main.
    		for (i = 0; i < count + 1; i++) {
    			ctx.strokeStyle = "#b8b8b8";
    			ctx.beginPath();
    			x = i * units + LEFT_GUTTER - offsetUnits;
    			ctx.moveTo(x, markerTrackHeight + 14);
    			ctx.lineTo(x, markerTrackHeight - 16);
    			ctx.stroke();
    		}
    
    		var mul = tickMark3 / tickMark2;
    		units = Math.round( timeScale / tickMark3 );
    		count =  Math.round( (width - LEFT_GUTTER + offsetUnits) / units );

        //  3.Small ticks.
            for (i = 0; i < count + 1; i++) {
            	if (i % mul === 0) continue;
            	ctx.strokeStyle = "#b8b8b8";
            	ctx.beginPath();
            	x = i * units + LEFT_GUTTER - offsetUnits;
            	ctx.moveTo(x, markerTrackHeight + 5);
            	ctx.lineTo(x, markerTrackHeight - 10);
            	ctx.stroke();
            }
        
    //  }
        
    //  paint();
    }

</script>

<script>

//  Animator Scene.

    if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

    mesh = null;
    group = null;
    SELECTED = null;

    var seaLevel = 0;
    var frameCount = 0;
    var stepFrequency = 60;
    var mouse = new THREE.Vector2();

    var armature;
    var armatureHelper;
    var axisCustomHelper;
    var originAxisHelper;
    
    var posx = $("#skybox-posx")[0];
    var negx = $("#skybox-negx")[0];
    var posy = $("#skybox-posy")[0];
    var negy = $("#skybox-negy")[0];
    var posz = $("#skybox-posz")[0];
    var negz = $("#skybox-negz")[0];
    var cubemap = [posx, negx, posy, negy, posz, negz];
    
    var rendererSelector = "#render-container";
    
    container = $(rendererSelector)[0];

    init( container );
    animate();

    function init( container ){
        scene = new THREE.Scene();
    //  scene.fog = new THREE.FogExp2( 0x000000, 0.0001 );
        
        near = 1; far = 100000;
        camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, near, far );
        camera.position.set( 60, 11, -113 );
        camera.rotation.set( 0, 0, 0 );
        camera.name = "CAMERA" ;

        sceneLights = newDirectionalLightsGroup(0xffffff, 1000, 1000, 1000, 0.5);

        controls = new THREE.EditorControls( camera );

    //  Skybox.
    //  scene.background = new THREE.CubeTexture( cubemap );
    //  scene.background.needsUpdate = true;

	//  Skydome.
        var loader = new THREE.TextureLoader();
		skydome = new THREE.Mesh(
			new THREE.SphereGeometry( far * 0.1, 15, 15 ),
			new THREE.MeshBasicMaterial({
				map: loader.load( "/skydomes/skydome.jpg" ),
				color: 0xffffff,
				side: THREE.DoubleSide
			})
		);
		skydome.rotation.y = Math.PI;
		skydome.scale.set(-1, 2, 1);
	//	scene.add( skydome );

        groundHelper = newGroundHelper();
        groundHelper.visible = true;
        
        axisCustomHelper = newCustomAxisHelper(1200);
        axisOriginHelper = newOriginAxisHelper(1200);

        projector = new THREE.Projector();
        keyboard = new KeyboardState();
        clock = new THREE.Clock();

    //  Renderer.
        renderer = new THREE.WebGLRenderer({ 
            antialias:true, 
            preserveDrawingBuffer:true,
            autoClear:true
        });
        renderer.shadowMapEnabled = true;
        renderer.setPixelRatio( window.devicePixelRatio );
        renderer.setSize( window.innerWidth, window.innerHeight ); 
        container.appendChild( renderer.domElement );

        window.addEventListener( "resize", onWindowResize, false );
        document.addEventListener( "mousedown", onDocumentMouseDown, false );
        document.addEventListener( "mouseup", onDocumentMouseUp, false );
        document.addEventListener( "mousemove", onDocumentMouseMove, false );

    //  Manny The Skeleton Default Rigged Mesh.
    //  loadSkinnedAnimatedMesh("models/json/skinned/MannyTheSkeletonDefaultRigged_v04.js", 1);

    //  Animator Inits.
    //  initAnimatorAdjustValues();

    //  Timeliner Inits.
        initTimeLiner();

    }

    function animate(){
        requestAnimationFrame( animate );
        render();
        frameCount++ ;
        update();
    }

    function render(){
    //  water.render();
        renderer.render( scene, camera );
    }

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize( window.innerWidth, window.innerHeight );
    //  if (controls instanceof THREE.FirstPersonControls) controls.handleResize();
        initTimeLiner();
    }

    function onDocumentMouseMove( event ) {
        mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
        mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
    }

    function onDocumentMouseDown( event ) {
        //  ADD CODE HERE.
    }
    
    function onDocumentMouseUp( event ) {
        //  ADD CODE HERE.
    }

    function update() {
        var delta = clock.getDelta();
        var time = clock.getElapsedTime();
    //  water.material.uniforms.time.value += 2.0 / 60.0;
        if (keyboard) keyboard.update( delta );
    //  if (controls instanceof THREE.FirstPersonControls) controls.update( delta );
    //  camereaPropertiesCapture();
    }

    function loadTexture( url, mapping, onLoad, onError ) {
        var loader = new THREE.TextureLoader();
        loader.setCrossOrigin( undefined );
        var texture = loader.load( url, onLoad, undefined, onError );
        if ( mapping ) texture.mapping = mapping;
        function onLoad(){
        //  texture.needsUpdate = true;
        }
        return texture;
    }

</script>

<input name="animation" type="hidden">

</body>
</html>
