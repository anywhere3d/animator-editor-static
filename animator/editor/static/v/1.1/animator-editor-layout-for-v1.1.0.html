<html>

    <head>
        <meta charset="utf-8">
        <meta http-equiv="keywords" content="animator, mesh, webgl, threejs, preview, upload, model, anywhere, 3D" />
        <meta http-equiv="description" content="A threejs animator." />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        
        <title>Animator Editor v1.1.2</title>
        
        <!-- <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css"> -->
        <!-- <link rel="stylesheet" href="bootstrap/css/bootstrap-theme.min.css"> -->
        <!-- <link rel="stylesheet" href="bootstrap/css/fileinput.min.css"> -->
        <link rel="stylesheet" href="css/buttons.css" media="all">
    	<link rel="stylesheet" href="css/spinner.css" media="all">
    	<link rel="stylesheet" href="css/normalize.css" media="all">
        <link rel="stylesheet" href="css/menu-menubar.css">
    	<!-- <link rel="stylesheet" href="css/side-panels.css"> -->
    	
    	<style>
            * { box-sizing:border-box; -moz-box-sizing:border-box; margin:0px; padding:0px; }
            html, body {width: 100%; height: 100%;}
            body { background-color: #ffffff; margin:0px; padding:0px; 
                color:#000000; font-size:13px; font-family:arial, san-serif; overflow:hidden; 
            }
            .sticky-footer { position:absolute; left:0px; right:0px; bottom:0px; height:60px; 
                background-color:#ffffff;
            }
            .scene-container { 
                position:absolute; left:0px; right:0px; top:0px; bottom:0px; padding:0px; margin:0px; border:none;
            }
            #timeline-container { position:absolute; left:250px; right:150px; top:1px; bottom:10px;}
        </style>
        
        <style id="animator-editor-css">
            /*canvas { position:absolute; top:0px; left:0px; widht:100%; height:100%; }*/
            #close-button { position:absolute; left:4px; top:4px; }
            #help-button  { position:absolute; right:4px; top:4px; }
            #help-icon, #close-icon { top:0px; left:0px; right:0px; height:24px; }
            #animation-editor { position:absolute; top:0px; left:0px; right:0px; bottom:0px; display:block; }
            #animator-render-container {
                position:absolute; top:0px; left:0px; right:0px; bottom:0px; margin:0px; 
                background-color: #000000; overflow:hidden; cursor:arrow; display:block;
            }
            #pauser {
                position:absolute; max-top:40%; min-top:30%; bottom:50%; left:5%; right:5%; padding:0px; margin:auto; 
                color:#ffffff; border: 0.0em solid #ffffff; border-radius:0.1em; 
                font-size:5em; text-align:center; text-vertical-align:middle;
                display:none; opacity:0.7; 
            }
            #animator-container {
                position:absolute; bottom:5px; left:80px; right:80px; height:40px; display:block;
                border:1px solid #ffffff;  border-radius:4px; color:#fff; text-align:left; 
            }
        </style>
        
    	<style id="side-panels-css">
            #left-side { left:0px; top:0px; bottom:0px; -webkit-transform:translateX( -380px ); }
        	#right-side { right:0px; top:0px; bottom:0px; -webkit-transform: translateX( 380px ); }
            #left-side, 
            #right-side { 
                color:#eee; font-size:11px; position:absolute;
                background-color:rgba(0,0,0,0.4); width:452px; line-height:1.4em;
                -webkit-transition: -webkit-transform 500ms ease-out;
            }
        	#left-side:hover, 
            #left-side.pinned,
            #right-side:hover, 
            #right-side.pinned { -webkit-transform: translateX(0); }
        	#left-side-content { 
                position:absolute; right:52px; top:0px; left:0px; bottom:0px; 
                padding:20px 20px 20px 20px; overflow:hidden; 
            }
            #right-side-content {
                position:absolute; left:52px; top:40px; right:10px; bottom:80px; 
                padding: 20px 20px 20px 20px; overflow:auto; 
            }
        	#left-side-pinbtn{ 
                position:absolute; top:20px; right:20px; width:32px; height:32px; 
                border:1px solid white; opacity:0.5; border-radius:4px; 
                background-image:url(icons/button-chat-remix.png);
                background-repeat:no-repeat; background-position:50% 50%; 
                background-size:contain; cursor:pointer;
                -webkit-transition:opacity 250ms ease-out; 
            }
            #right-side-pinbtn{ 
                position: absolute; top: 20px; left: 20px; width: 32px; height: 32px; 
                border: 1px solid white; opacity:0.5; border-radius: 4px; 
                background-image: url(icons/options-panel.png); 
                background-repeat:no-repeat; background-position: 50% 50%; 
                background-size:contain; cursor:pointer;
                -webkit-transition: opacity 250ms ease-out;
            }
            #left-side-pinbtn:hover, 
            #left-side-pinbtn.pinned,
            #right-side-pinbtn:hover, 
            #right-side-pinbtn.pinned { opacity:1; }
        	#hover { opacity:1; }
        	.reset-container a:link    {color:#ccf; text-decoration:initial;}
            .reset-container a:visited {color:#ccf; text-decoration:initial;}
            .reset-container a:hover   {color:#0f0; text-decoration:initial;}
            .reset-container a:active  {color:#f00; text-decoration:initial;}
        	/* a { color:white; text-shadow:0 1px 0 rgba(0,0,0,0.5) } */
        	#left-side h1, 
            #right-side h1 { margin-bottom:10px; font-size:14px;}
        	#left-side h2, 
            #right-side h2 { font-size:11px; margin-bottom:5px;}
        	#left-side p, 
            #right-side p  { font-size:13px; }
            .btn-light, 
            .btn-escape, 
            .btn-helper    { width:32px; height:32px; opacity:1; background:rgba(255,255,255,0); }
            .block         { margin-bottom:10px; float:left; width:280px; }
            .button:hover, 
            .button:active { background-position:0px -2px; }
        </style>
        
        <style id="v3-dynamic-sliders-css">
            #droplist-bones { position:absolute; left:150px; width:200px; font-size:15px; }
            #bone-label { position:absolute; left:0px; right:0px; top:0px; font-size:1.5em; text-align:center; }
            .control-container { 
                left:0px; right:0px; margin-bottom:10px; padding:10px; 
                color: #ffffff; border:2px solid #ffffff; border-radius:10px; 
            }
            .slider-row { padding-left:10px; padding-right:5px; margin-bottom:4px;}
            .dynamic-label  { position:absolute; width:18%; font-size:11px; padding-top:2px; }
            .dynamic-slider { width:60%; margin-left:20%; }
            .dynamic-output { 
                position:absolute; margin-right:10px; width:18%; 
                color:#ffffff; border:none; background-color:rgba(255,255,255,0); 
                font-weight:bold; font-size:1.5em; text-align:right; 
            } 
            .reset-container {padding:1px; margin-bottom:10px; font-weight:bold; text-align:right;}
        </style>
<!-- 
        <link rel="stylesheet" href="css/buttons.css" media="all">
    	<link rel="stylesheet" href="css/spinner.css" media="all">
    	<link rel="stylesheet" href="css/normalize.css" media="all">
 -->
        <script src="js/jquery/3.1.1/jquery.min.js"></script>
        <script src="bootstrap/js/fileinput.min.js"></script>
        
        <script>
            function template(t, p){
                p.appendChild( document.importNode(t.content, true) );
            }
        </script>
        
        <script>
        
        //  CURRENT SLIDER OUTPUT AND TARGET.
        //  These must exist in document as global:
            currentSlider = null;           // slider element
            currentOutput = null;           // output element
            currentTarget = null;           // vector3 object
            currentSliderStatus = false;    // boolean.

        //  animate();
            
        //  function animate(){
        //      requestAnimationFrame( animate );
        //      if (currentSliderStatus) currentSlider.update();
        //  }
            
        </script>

        <script>
        
        //  DYNAMIC AND STATIC SLIDER OPTIONS.
        /*
             *  options: { 
             *      slider:   HTML element, 
             *      output:   HTML element, 
             *      min:      number, 
             *      max:      number, 
             *      step:     number, 
             *      restore:  number, 
             *      value:    number,
             *      vector:   string ("x", "y" or "z")
             *      onoutput: function,
             *      onupdate: function
             *  }
         */
        
        //  DYNAMIC SLIDER INIT FUNCTION.
        
            var dynamicInit = function( options ) {
                
                this.output = options.output;
                this.output.slider = this;
                this.vector = this.output.vector = options.vector;
                this.restore = options.restore;
                this.value = options.value;
                this.min = options.min;
                this.max = options.max;
                this.step = options.step;
                this.value = options.value;
                this.update = options.onupdate;
                this.output.oninput = options.onoutput;
                
            //  Slider Event listeners.
            
                this.onmousedown = function() { 
                    currentSlider = this;
                    currentOutput = this.output;
                    currentSliderStatus = true;
                    currentSlider.value = this.restore;
                };
                
                this.onmouseup = function() { 
                    currentSlider.value = this.restore;
                    currentSlider = null;
                    currentOutput = null;
                    currentSliderStatus = false; 
                };
                
            //  Output Event listeners.
            
                this.output.onmousedown = function() {
                    if (!currentTarget) event.preventDefault();
                };

                console.log("Dynamic slider", this.id, "initialized.");
            }
            
        //  STATIC SLIDER INIT FUNCTION.
            
            var staticInit = function( options ) {
            
                this.output = options.output;
                this.output.slider = this;
                this.vector = this.output.vector = options.vector;
                this.restore = this.output.restore = options.restore;
                this.value = this.output.value = options.value;
                this.min = this.output.min = options.min;
                this.max = this.output.max = options.max;
                this.step = this.output.step = options.step;
                this.value = this.output.value = options.value;
                this.update = options.onupdate;
                this.output.oninput = options.onoutput;
                
            //  Slider Event listeners.
            
                this.onmousedown = function() { 
                    currentSlider = this;
                    currentOutput = this.output;
                    currentSliderStatus = true;
                };
                
                this.onmouseup = function() { 
                    currentSlider = null;
                    currentOutput = null;
                    currentSliderStatus = false; 
                };
                
            //  Output Event listeners.
            
                this.output.onmousedown = function() {
                    if (!currentTarget) event.preventDefault();
                };

                console.log("Static slider", this.id, "initialized.");
            }

        </script>

    <!-- TIMELINER -->
    
        <script>

            function initTimeLiner ( timeContainer ) {
        
            //  Timeliner.
            
            //  var timeContainer = document.getElementById("time-container");
                timeContainer.innerHTML = "";
                    
            //  Settings.
            
                var duration = 3; // (sec).
            //  var duration = Number(animtimerSlider.max);
                var defaultTimeScale = Math.floor(timeContainer.offsetWidth / duration); // (pixels).
            
            //  Dimensions.
                var markerTrackHeight = 20;
            //  var width = animtimerSlider.offsetWidth; 
                var width = duration * defaultTimeScale;
                var height = 50;
                var timeScale = defaultTimeScale; // number of pixels to 1 second.
            
            //  Utilities.
                function proxy_ctx(ctx) {
            	//  Creates a proxy 2d context wrapper which 
            	//  allows the fluent / chaining API.
                	var wrapper = {};
                
                	function proxy_function(c) {
                		return function() {
            			//  Warning: this doesn't return value of function call
                			ctx[c].apply(ctx, arguments);
                			return wrapper;
                		};
                	}
                
                	function proxy_property(c) {
                		return function(v) {
                			ctx[c] = v;
                			return wrapper;
                		};
                	}
                
                	wrapper.run = function(args) {
                		args(wrapper);
                		return wrapper;
                	};
                    
                	for (var c in ctx) {
            		//  if (!ctx.hasOwnProperty(c)) continue;
            		//  console.log(c, typeof(ctx[c]), ctx.hasOwnProperty(c));
            		//  string, number, boolean, function, object
                
                		var type = typeof(ctx[c]);
                		switch(type) {
                			case "object":
                				break;
                			case "function":
                				wrapper[c] = proxy_function(c);
                				break;
                			default:
                				wrapper[c] = proxy_property(c);
                				break;
                		}
                	}
                
                	return wrapper;
                }
            
            //  View Panel.
                var frame_start = 0; // this is the current scroll position.
                
            //  This class contains the view for the right main section of timeliner
                var tickMark1;
                var tickMark2;
                var tickMark3;
            
            //  Time scale.
            
            //  Subdivison LOD
            //  timeScale refers to number of pixels per unit
            //  Eg. 1 inch - 60s, 1 inch - 60fps, 1 inch - 6 mins.
            
                function time_scaled() {
    
                	var subDivision = 60;
                
                	tickMark1 = Math.round( (timeScale / subDivision) * 100 ) / 100;
                	tickMark2 = 2 * tickMark1;
                	tickMark3 = 10 * tickMark1;
                
                }
                
                time_scaled();
        
            //  Timeline Panel.
            
                var dpr = window.devicePixelRatio;
                var canvas = document.createElement("canvas");
                canvas.width = width; // * dpr;
                canvas.height = height; // * dpr;
                timeContainer.appendChild(canvas);
                
                var ctx = canvas.getContext("2d");
            	var ctx_wrap = proxy_ctx(ctx);
                
                var currentTime; // measured in seconds.
        	
            	var LEFT_GUTTER = 0;
            	var i, x, y, il, j;
        	
        	//  Paint.
        	
        	    function paint() {
                
                //  Background.
                    ctx.fillStyle = "#ffffff";
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
            		ctx.save();
            		ctx.scale(dpr, dpr);
                    
                    ctx.lineWidth = 2; // options: | 0.5 | 1 | 2 |
                    
                    var units = Math.round(timeScale / tickMark1);
            		var offsetUnits = (frame_start * timeScale) % units;
            		var count = Math.ceil( width / units );
          
                //  timeScale = pixels to 1 second (40)
        		//  tickMark1 = marks per second (marks / s)
        		//  units = pixels to every mark (40)
                    var t =  Math.floor(units * 100 / timeScale);
                    console.log("t:", t);
                    
                //  1.Labels only.
            		for (i = 0; i < count + 1; i++) {
            			x = i * units + LEFT_GUTTER - offsetUnits;
                        
            			ctx.fillStyle = "#535353";
            			ctx.textAlign = "center";
                        
            			var ti = ( t * i / 100 ).toFixed(2).replace(/\./g, ":");
            			console.log("t" + i + ":", ti);
                        
            			ctx.fillText(ti, x, 50);
            		}
            
            		units = Math.round( timeScale / tickMark2 );
            		count =  Math.round( (width - LEFT_GUTTER + offsetUnits) / units );
        
                //  2.Marker lines - main.
            		for (i = 0; i < count + 1; i++) {
            			ctx.strokeStyle = "#b8b8b8";
            			ctx.beginPath();
            			x = i * units + LEFT_GUTTER - offsetUnits;
            			ctx.moveTo(x, markerTrackHeight + 14);
            			ctx.lineTo(x, markerTrackHeight - 16);
            			ctx.stroke();
            		}
            
            		var mul = tickMark3 / tickMark2;
            		units = Math.round( timeScale / tickMark3 );
            		count =  Math.round( (width - LEFT_GUTTER + offsetUnits) / units );
        
                //  3.Small ticks.
                    for (i = 0; i < count + 1; i++) {
                    	if (i % mul === 0) continue;
                    	ctx.strokeStyle = "#b8b8b8";
                    	ctx.beginPath();
                    	x = i * units + LEFT_GUTTER - offsetUnits;
                    	ctx.moveTo(x, markerTrackHeight + 5);
                    	ctx.lineTo(x, markerTrackHeight - 10);
                    	ctx.stroke();
                    }
                    
                } // end of paint().
                
                paint();
            }

        </script>  
        
    </head>
    
    <body>
        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-87777501-1', 'auto');
            ga('send', 'pageview');
            ga('set', 'userId', '{{googleAnalytics_userId}}'); // Set the user ID using signed-in user_id.
        </script>
        
        <div id="animation-editor">
            <div id="animator-render-container"></div>
        </div>
    
    <!-- LEFT SIDE PANEL -->
        <div id="left-side">
            <div id="left-side-pinbtn">
            </div>
            <div id="left-side-content">
            
                <!-- CONTENTS HERE -->
                
            </div>
        </div>
        
    <!-- RIGHT SIDE PANEL -->
        <div id="right-side" class="pinned">
            <div id="right-side-pinbtn" class="pinned"></div>
            <div id="right-side-content">
                
                <div id="bone-label"><strong>Bone&nbsp;<span id="bone-label-selected-name">Animator</span></strong></div>
                
                <div id="current-bone-select" class="control-container" style="padding-bottom:18px;">
                    <label for="droplist-bones" id="droplist-label"><strong>Selected Bone:</strong></label>
                    <select id="droplist-bones" name="BONES" size="1" onchange="newCurrentBoneSelected();">
                        <option value="Armature" selected>Armature</option>
                        <option value="Head">Head</option>
                        <option value="Neck">Neck</option>
                        <option value="Torso">Torso</option>
                        <option value="Hip">Hip</option>
                        <option value="Arms">Arms</option>
                        <option value="Legs">Legs</option>
                    </select>
                </div>
                
                <div class="reset-container">
                    <a href="#"><span id="reset-position">&nbsp;</span></a>
                </div>
                
                <div id="position-sliders" class="control-container">
                    <div class="slider-row">
                        <label for="pos-slider-x" id="pos-label-x" class="dynamic-label">position&nbsp;<strong>x:</strong></label>
                        <input type="range" id="pos-slider-x" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                        <input type="number" id="pos-output-x" class="dynamic-output" value="0" step="0.01">
                    </div>
                    <div class="slider-row">
                        <label for="pos-slider-y" id="pos-label-y" class="dynamic-label">position&nbsp;<strong>y:</strong></label>
                        <input type="range" id="pos-slider-y" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                        <input type="number" id="pos-output-y" class="dynamic-output" value="0" step="0.01">
                    </div>
                    <div class="slider-row">
                        <label for="pos-slider-z" id="pos-label-z" class="dynamic-label">position&nbsp;<strong>z:</strong></label>
                        <input type="range" id="pos-slider-z" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                        <input type="number" id="pos-output-z" class="dynamic-output" value="0" step="0.01">
                    </div>
                </div>
                
                <div class="reset-container">
                    <a href="#"><span id="reset-position" onclick="bonesResetPosition(avatar);">Reset all bones position</span></a>
                </div>
                
                <div id="rotation-sliders" class="control-container">
                    <div class="slider-row">
                        <label for="rot-slider-x" id="rot-label-x" class="dynamic-label">rotation&nbsp;<strong>x:</strong></label>
                        <input type="range" id="rot-slider-x" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                        <input type="number" id="rot-output-x" class="dynamic-output" value="0" step="0.01">
                    </div>
                    <div class="slider-row">
                        <label for="rot-slider-y" id="rot-label-y" class="dynamic-label">rotation&nbsp;<strong>y:</strong></label>
                        <input type="range" id="rot-slider-y" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                        <input type="number" id="rot-output-y" class="dynamic-output" value="0" step="0.01">
                    </div>
                    <div class="slider-row">
                        <label for="rot-slider-z" id="rot-label-z" class="dynamic-label">rotation&nbsp;<strong>z:</strong></label>
                        <input type="range" id="rot-slider-z" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                        <input type="number" id="rot-output-z" class="dynamic-output" value="0" step="0.01">
                    </div>
                </div>
                
                <div class="reset-container">
                    <a href="#"><span id="reset-rotation" onclick="bonesResetQuaternion(avatar);">Reset all bones rotation</span></a>
                </div>
                
                <div class="control-container">
                    <div class="slider-row">
                        <label for="scl-uniform-slider" class="dynamic-label">Scale <strong>xyz</strong></label>
                        <input type="range" id="scl-uniform-slider" min="-1" max="1" value="0" class="dynamic-slider" step="0.01">
                        <input type="number" id="scl-uniform-output" value="0" class="dynamic-output" step="0.01">
                    </div>
                </div>
                
                <div class="reset-container">
                    <a href="#"><span id="reset-scale" onclick="bonesResetScale(avatar);">Reset all bones scale</span></a>
                </div>
                
                <div id="scale-sliders" class="control-container">
                    <div class="slider-row">
                        <label for="scl-slider-x" id="scl-label-x" class="dynamic-label">scale&nbsp;<strong>x:</strong></label>
                        <input type="range" id="scl-slider-x" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                        <input type="number" id="scl-output-x" class="dynamic-output" value="0" step="0.01">
                    </div>
                    <div class="slider-row">
                        <label for="scl-slider-y" id="scl-label-y" class="dynamic-label">scale&nbsp;<strong>y:</strong></label>
                        <input type="range" id="scl-slider-y" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                        <input type="number" id="scl-output-y" class="dynamic-output" value="0" step="0.01">
                    </div>
                    <div class="slider-row">
                        <label for="scl-slider-z" id="scl-label-z" class="dynamic-label">scale&nbsp;<strong>z:</strong></label>
                        <input type="range" id="scl-slider-z" class="dynamic-slider" min="-1" max="1" value="0" step="0.01">
                        <input type="number" id="scl-output-z" class="dynamic-output" value="0" step="0.01">
                    </div>
                </div>
                
                <div class="reset-container">
                    <a href="#"><span id="avatar-helper" onclick="showhideHelper(avatar);">Show/Hide Avatar</span></a>&nbsp;&nbsp;&nbsp;
                    <a href="#"><span id="bones-helper" onclick="showhideHelper(armatureHelper);">Show/Hide Bones</span></a>&nbsp;&nbsp;&nbsp;
                    <a href="#"><span id="reset-pose" onclick="avatarRestPose(avatar);">Avatar Rest Pose</span></a>
                </div>
                
                <div id="animation-options" class="control-container">
                    <div class="slider-row">
                        <label for="duration-slider" class="dynamic-label">Duration&nbsp;<strong>:</strong></label>
                        <input type="range" id="duration-slider" class="dynamic-slider" min="-1" max="1" value="0" step="0.1">
                        <input type="number" id="duration-output" value="3" class="dynamic-output" step="0.1">
                    </div>
                    <div class="slider-row">
                        <label for="scl-time-slider" class="dynamic-label">Play Speed</label>
                        <input type="range" id="scl-time-slider"class="dynamic-slider"  min="0" max="2" value="1" step="0.1">
                        <input type="number" id="scl-time-output" value="1" class="dynamic-output" step="0.1">
                    </div>
                    <div class="slider-row">
                        <label for="animation-loop">Loop&nbsp;</label>
                        <input type="checkbox" id="animation-loop" name="loop" checked="true">
                    </div>
                    <div class="slider-row" style="font-size:15px;">
                        <label for="animation-name" class="dynamic-label">Name:<strong></strong></label>
                        <input type="text" id="animation-name" class="dynamic-slider" maxLength="128" placeholder="animation name">
                    </div>
                    <div class="slider-row">&nbsp;</div>
                    <div class="slider-row" style="font-size:13px;">
                        <a href="#" id="load-male" class="button" onclick="$('#load-skinned')[0].click();">Male</a>
                        <a href="#" id="load-female" class="button" onclick="$('#load-skinned')[0].click();">Female</a>
                        <a href="#" id="load-manny" class="button" onclick="$('#load-skinned')[0].click();">Skeleton</a>
                        <input type="file" id="load-skinned" style="display:none;" onchange="loadJsonSkinnedAnimatedMesh(event);">
                        <a href="#" id="load-skinned-button" class="button" onclick="$('#load-skinned')[0].click();">Import&nbsp;Skinned</a>
                        
                    </div>
                </div>

            </div>
        </div>
        
    <!-- FOOTER -->
        <div id="footer" class="sticky-footer">
    		<div class="footer-container container">
    			<!-- <p class="text-muted"> -->
    		    <div id="animation-buttons" style="padding:12px;">
                    <a href="#" id="animation-play" class="button">Play</a> <!-- onclick="playAnimation(avatar);" -->
                    <a href="#" id="animation-add" class="button">Add Key</a> <!-- onclick="insertNewAnimateDataTimeFrameKey();" -->
                    <a href="#" id="delete-framekey" class="button">Delete</a> <!-- onclick="deleteCurrentAnimationDataKey();" -->
                    <input type="checkbox" id="manual-play" name="manual" checked>
                </div>
                
                <div id="timeline-container"></div>
    			<!-- </p> -->
    		</div>
    	</div>
	        
    <!-- CAMERA MEASURMENTS -->
        <div id="camera-measure-panel" style="display:none;">
            <div id="close-button" class="btn-close" onclick="hidePanel('camera-measure-panel');"></div><br>
            <li><strong>frame:&nbsp;</strong><span id="framer">value</span></li>
            <br>
            <li><strong>Camera Properties</strong>
                <ul>
                    <li>position&nbsp;x:<span id="cam-pos-x">value</span></li>
                    <li>position&nbsp;y:<span id="cam-pos-y">value</span></li>
                    <li>position&nbsp;z:<span id="cam-pos-z">value</span></li>
                    <br>
                    <li>rotation&nbsp;x:<span id="cam-rot-x">value</span></li>
                    <li>rotation&nbsp;y:<span id="cam-rot-y">value</span></li>
                    <li>rotation&nbsp;z:<span id="cam-rot-z">value</span></li>
                    <br>
                    <li>quaternion&nbsp;w:<span id="cam-quat-w">value</span></li>
                    <li>quaternion&nbsp;x:<span id="cam-quat-x">value</span></li>
                    <li>quaternion&nbsp;y:<span id="cam-quat-y">value</span></li>
                    <li>quaternion&nbsp;z:<span id="cam-quat-z">value</span></li>
                    <br>
                    <li>far:&nbsp;<span id="cam-far">value</span></li>
                    <li>fov:&nbsp;<span id="cam-fov">value</span></li>
                </ul>
            </li>
            <br>
            <li><strong>Mouse Properties</strong>
                <ul>
                    <li>screen&nbsp;x:<span id="mouse-x">value</span></li>
                    <li>screen&nbsp;y:<span id="mouse-y">value</span></li>
                </ul>
            </li>
        </div>
        
        <script src="js/three.js" language="javascript" type="text/javascript"></script>
        <script src="js/EditorControls.js" language="javascript" type="text/javascript"></script>
        <script src="js/Detector.js" language="javascript" type="text/javascript"></script>
        <script src="js/Projector.js" language="javascript" type="text/javascript"></script>
        <script src="js/KeyboardState.js" language="javascript" type="text/javascript"></script>
        <script src="js/Animation.js" language="javascript" type="text/javascript"></script>
        <script src="js/AnimationHandler.js" language="javascript" type="text/javascript"></script>
        <script src="js/KeyFrameAnimation.js" language="javascript" type="text/javascript"></script>
        
        <script>
            window.debugMode = true;
            
            leftSidePinBtn = $("#left-side-pinbtn")[0];
            rightSidePinBtn = $("#right-side-pinbtn")[0];
            
            leftSidePinBtn.pinned = false;
            rightSidePinBtn.pinned = true;
            
            leftSidePinBtn.onclick = function(){ 
                this.pinned = !this.pinned; 
                this.classList.toggle( "pinned", this.pinned );
            	this.parentElement.classList.toggle( "pinned", this.pinned );
            };
            rightSidePinBtn.onclick = function(){ 
                this.pinned = !this.pinned; 
                this.classList.toggle( "pinned", this.pinned );
            	this.parentElement.classList.toggle( "pinned", this.pinned );
            };

            var HtmlCollection = document.all;
            for (var i=0; i < HtmlCollection.length; i++) {
                HtmlCollection[i].tabindex = -1;
            }
            
            function hidePanel( id ){
                $("#" + id)[0].style.display = "none";
            }
            
            function showPanel( id ){
                $("#" + id)[0].style.display = "block";
            }
            
        </script>        
        
        <script>
        
            var frameCount = 0;
            var mouse = new THREE.Vector2();
            
            function init( container ){

            //  Scene.
                scene = new THREE.Scene();
            //  scene.fog = new THREE.FogExp2( 0x000000, 0.0001 );
    
            //  Camera.
                camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 1, 100000 );
                camera.position.set( 60, 11, -113 );
                camera.rotation.set( 0, 0, 0 );
                camera.name = "CAMERA" ;
    
            //  Scene lights.
                light0 = newDirectionalLight(0xffffff, 1000, 1000, 1000, 0.5);
                light1 = newDirectionalLight(0xffffff, 1000, 1000, -1000, 0.5);
                light2 = newDirectionalLight(0xffffff, -1000, 1000, -1000, 0.5);
                light3 = newDirectionalLight(0xffffff, -1000, 1000, 1000, 0.5);
                light4 = newDirectionalLight(0xffffff, 0, -1000, 0, 0.5);
                sceneLights = [ light0, light1, light2, light3, light4 ];
    
            //  Controls.
                controls = new THREE.EditorControls(camera);
    
            //  Projector.
            	projector = new THREE.Projector();
    
            //  Ground Helper.
                groundHelper = newGroundHelper();
                groundHelper.visible = true;
    
            //  Axis Helper.
            //  axisCustomHelper = newCustomAxisHelper();
            //  axisCustomHelper.visible = false;
            
            //  Skybox.
            //  newSkybox( cubemap );
    
            //  Keyboard controls.
                keyboard = new KeyboardState();
    
            //  Clock.
                clock = new THREE.Clock();
                stepFrequency = 60;

            //  Renderer.
                renderer = new THREE.WebGLRenderer({ 
                    antialias:true, 
                    preserveDrawingBuffer:false 
                });
                renderer.shadowMapEnabled = true;
        		renderer.setPixelRatio( window.devicePixelRatio );
        		renderer.setSize( window.innerWidth, window.innerHeight ); 
    			renderer.autoClear = false; 
        		container.appendChild( renderer.domElement );
    
            //  Event Listeners.
                window.addEventListener( "resize", onWindowResize, false );
            	document.addEventListener( "mousedown", onDocumentMouseDown, false );
            	document.addEventListener( "mouseup", onDocumentMouseUp, false );
                document.addEventListener( "mousemove", onDocumentMouseMove, false );
                
            }
                
            function animate(){
                requestAnimationFrame( animate );
                render();
                frameCount++ ;
                update();
            }
                
            function render(){
                renderer.render( scene, camera );
            }
    
            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize( window.innerWidth, window.innerHeight );
                initTimeLiner ( timeContainer );
        	}
    
            function onDocumentMouseMove( event ) {
                mouse.x =   ( event.clientX / window.innerWidth ) * 2 - 1;
               	mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
            }
    
            function onDocumentMouseDown( event ) {
                // add code here //
            }
    
            function onDocumentMouseUp( event ) {
                // add code here //
            }
                
            function update() {
                var delta = clock.getDelta();
                var	time = clock.getElapsedTime();
                if (keyboard) keyboard.update( delta );
    
            //  propertiesCapturer();
    
            }
            
            function animate(){
                requestAnimationFrame( animate );
                render();
                frameCount++ ;
                update();
            }
                
            function render(){
                renderer.render( scene, camera );
            }
    
            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize( window.innerWidth, window.innerHeight );
                initTimeLiner ( timeContainer );
        	}
    
            function onDocumentMouseMove( event ) {
                mouse.x =   ( event.clientX / window.innerWidth ) * 2 - 1;
               	mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
            }
    
            function onDocumentMouseDown( event ) {
                // add code here //
            }
    
            function onDocumentMouseUp( event ) {
                // add code here //
            }
                
            function update() {
                var delta = clock.getDelta();
                var	time = clock.getElapsedTime();
                if (keyboard) keyboard.update( delta );
                if (currentSliderStatus) currentSlider.update();
            //  propertiesCapturer();
    
            }
            
            function newDirectionalLight(hexcolor, x, y, z, intensity){
                var light = new THREE.DirectionalLight( hexcolor );
                light.position.set( x, y, z );
                light.intensity = intensity;
                scene.add( light );
                return light;
                
            }
    
            function newGroundHelper(){
                var grid = new THREE.GridHelper( 1000, 1, 0x444444, 0x444444 );
                grid.name = "GRID"
                grid.position.y = 0;
                scene.add( grid );
                return grid;
            }
            
            function newSkybox( cubemap ) {
            //  Skybox.
                scene.background = new THREE.CubeTexture( cubemap );
                scene.background.needsUpdate = true;
            }
            
            function newSkydome( filepath ){
            //  Skydome textures.
                var loader = new THREE.TextureLoader();
                var geometry = new THREE.SphereGeometry( 5000, 64, 32 );
                var texture = loader.load( filepath );
                var material = new THREE.MeshBasicMaterial({
    				map: texture,
    				side: THREE.DoubleSide
    			});
                skydome = new THREE.Mesh( geometry, material );
                skydome.scale.y = 0.5;
                skydome.name = "SKYDOME";
                scene.add(skydome);
            }
            
            var timeContainer = $("#timeline-container")[0];
            initTimeLiner ( timeContainer );
            
            var sceneContainer = $("#animator-render-container")[0];
            init( sceneContainer );
            
            animate();

        </script>  
        
        
        
    </body>

</html>
